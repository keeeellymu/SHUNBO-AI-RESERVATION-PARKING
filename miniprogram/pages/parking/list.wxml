<!-- åœè½¦åœºåˆ—è¡¨é¡µé¢ -->
<view class="parking-container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <text class="search-icon">ğŸ”</text>
      <input type="text" placeholder="æœç´¢åœè½¦åœº" bindinput="onSearchInput" value="{{searchKeyword}}"/>
    </view>
  </view>

  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <view class="filter-item {{sortType === 'distance' ? 'active' : ''}}" bindtap="setSortType" data-type="distance">
      è·ç¦»ä¼˜å…ˆ
    </view>
    <view class="filter-item {{sortType === 'price' ? 'active' : ''}}" bindtap="setSortType" data-type="price">
      ä»·æ ¼ä¼˜å…ˆ
    </view>
    <view class="filter-item {{sortType === 'rating' ? 'active' : ''}}" bindtap="setSortType" data-type="rating">
      è¯„åˆ†ä¼˜å…ˆ
    </view>
  </view>

  <!-- åŒºåŸŸç­›é€‰ -->
  <view class="area-filter" wx:if="{{areaList.length > 0}}">
    <view class="area-filter-title">åŒºåŸŸç­›é€‰ï¼š</view>
    <scroll-view scroll-x="true" class="area-scroll">
      <view class="area-item {{selectedArea === '' ? 'active' : ''}}" bindtap="setArea" data-area="">
        å…¨éƒ¨
      </view>
      <view wx:for="{{areaList}}" wx:key="*this" 
            class="area-item {{selectedArea === item ? 'active' : ''}}" 
            bindtap="setArea" 
            data-area="{{item}}">
        {{item}}
      </view>
    </scroll-view>
  </view>

  <!-- åœè½¦åœºåˆ—è¡¨ -->
  <view class="parking-list">
    <block wx:if="{{parkingList.length > 0}}">
      <view class="parking-item" wx:for="{{parkingList}}" wx:key="id" bindtap="navigateToDetail" data-id="{{item.id}}">
        <view class="parking-image">
          <image class="parking-img" src="{{item.imageUrl}}" mode="aspectFill" lazy-load="false" webp="false" binderror="onImageError" bindload="onImageLoad" data-index="{{index}}"></image>
        </view>
        <view class="parking-info">
          <view class="parking-name">{{item.name}}</view>
          <view class="parking-address">{{item.address}}</view>
          <view class="parking-details">
            <view class="distance">{{item.distance}}km</view>
            <view class="area">{{item.area}}</view>
            <view class="price">Â¥{{item.price}}å…ƒ/å°æ—¶</view>
            <view class="rating">â­ {{item.rating}}</view>
          </view>
          <view class="available-spots">
            <text class="available-count">{{item.availableSpaces || item.availableSpots || 0}}</text>
            <text class="available-label">ä¸ªç©ºä½™è½¦ä½</text>
          </view>
        </view>
      </view>
    </block>
    <view wx:else class="empty-state">
      <text>æš‚æ— åœè½¦åœºæ•°æ®</text>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore}}">
    <text wx:if="{{loading}}">åŠ è½½ä¸­...</text>
    <text wx:else bindtap="loadMore">ç‚¹å‡»åŠ è½½æ›´å¤š</text>
  </view>
</view>