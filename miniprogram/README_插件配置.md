# 插件配置说明

## 当前状态

**插件配置已暂时禁用**，代码会自动使用微信原生录音API。

## 如何启用插件（推荐）

### 步骤1：在微信公众平台添加插件

1. 登录 [微信公众平台](https://mp.weixin.qq.com/)
2. 进入 **设置** > **第三方服务** > **插件管理**
3. 点击 **添加插件**
4. 搜索插件AppID：`wx3030a84d9f33b5c6` 或搜索 **"同声传译"**
5. 点击 **添加** 并等待审核通过（通常几分钟）

### 步骤2：启用插件配置

编辑 `app.json`，将：

```json
"_plugins_template": {
  "_comment": "如需启用插件，取消下面的注释并删除前面的下划线",
  "_WechatSI": {
    "_version": "0.3.5",
    "_provider": "wx3030a84d9f33b5c6"
  }
}
```

改为：

```json
"plugins": {
  "WechatSI": {
    "version": "0.3.5",
    "provider": "wx3030a84d9f33b5c6"
  }
}
```

### 步骤3：清除缓存并重新编译

1. 在微信开发者工具中：**工具** > **清缓存** > **清除数据缓存**
2. 重新编译项目

## 不使用插件（当前方案）

如果不使用插件，代码会自动使用微信原生录音API。但需要注意：

1. **需要后端支持**：原生API只能录音，需要后端实现语音识别接口
2. **接口路径**：`POST /api/v1/voice/upload`
3. **上传格式**：multipart/form-data，字段名 `audio`

## 两种方案对比

| 特性 | 插件方案 | 原生API方案 |
|------|---------|-----------|
| 配置难度 | 需要后台添加 | 无需配置 |
| 识别方式 | 实时识别 | 需要上传到后端 |
| 识别速度 | 快 | 较慢 |
| 推荐度 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |

## 当前代码状态

代码已完全兼容两种方案：
- ✅ 如果插件可用，自动使用插件
- ✅ 如果插件不可用，自动降级到原生API
- ✅ 不会因为插件错误而崩溃
- ✅ 控制台会显示当前使用的方案

## 测试方法

1. 打开小程序首页
2. 点击搜索栏右侧的麦克风图标
3. 查看控制台输出，确认使用的方案：
   - `✓ 使用微信同声传译插件` - 插件模式
   - `✓ 使用微信原生录音API` - 原生模式

